---
title: "Как изменить годовую сумму в сервисном контракте или в предложении по контракту"
description: "Можно изменить сумму, на которую ежегодно будут выставляться счета по сервисным контрактам или предложениям по сервисным контрактам."
author: bholtorf
ms.prod: dynamics-nav-2017
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 09/08/2017
ms.author: bholtorf
ms.translationtype: HT
ms.sourcegitcommit: 4fefaef7380ac10836fcac404eea006f55d8556f
ms.openlocfilehash: 7c2008b7de70f6a6b862671f84e6830d13177407
ms.contentlocale: ru-ru
ms.lasthandoff: 10/16/2017

---
# <a name="how-to-change-the-annual-amount-on-service-contracts-or-contract-quotes"></a>Практическое руководство. Изменение годовой суммы в сервисном контракте или в предложении по контракту
Чтобы исправить сумму, на которую будет ежегодно выставляться счет, можно изменить годовую сумму в сервисном контракте или в предложении по контракту.  

## <a name="to-change-the-annual-amount-of-the-service-contract-or-contract-quote"></a>Изменение годовой суммы в сервисном контракте или в предложении по контракту  

1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Сервисные контракты** или **Предложения по сервисному контракту**, затем выберите связанную ссылку.  
2. Выберите контракт или предложение по контракту.  
3. Выберите действие **Открыть контракт**, чтобы открыть контракт или предложение по контракту для редактирования.  
4. Установите флажок **Разрешить несбаланс. суммы**, если необходимо изменить годовую сумму и вручную распределить разницу годовых сумм по строкам контракта. В противном случае снимите этот флажок, чтобы распределять разницу годовой суммы по строкам контракта автоматически после изменения годовой суммы.  
5. Измените значение поля **Годовая сумма**. При отрицательном значении годовой суммы невозможно подписать (т. е. превратить предложение по контракту, с которым в данный момент работают, в сервисный контракт) или закрыть сервисный контракт. Если годовая сумма равна нулю, при подписании или закрытии сервисного контракта значение поля **Расчетный период** необходимо установить на **Нет**.  
6. В зависимости от того, установлен ли флажок **Разрешить несбаланс. суммы**, проведите распределение разницы годовой суммы вручную или автоматически. Строки контрактов обновятся так, что значение поля **Вычисленная годовая сумма** станет равным новой годовой сумме.  

## <a name="distributing-differences-between-new-and-calculated-annual-amounts"></a>Распределение разницы между новой и вычисленной годовыми суммами
При изменении годовой суммы сервисного контракта или предложения по контракту может возникнуть необходимость распределения разницы между новой и расчетной годовыми суммами по строкам контракта. Предусмотрено три способа распределить суммы:

* Равномерное распределение  
* Распределение на основе сумм строки  
* Распределение на основе прибыли

### <a name="even-distribution"></a>Равномерное распределение
При изменении годовой суммы сервисного контракта или предложения по контракту может возникнуть необходимость распределения разницы между новой и расчетной годовыми суммами по строкам контракта. Равномерное распределение – это один из методов автоматического распределения, который помогает распределить поровну разницу между новой и расчетной годовыми суммами по суммам строк в строках контракта. Перечисленные ниже этапы процедуры распределения поясняют основную идею данного метода:  

1. Разница между значениями полей **Годовая сумма** и **Вычисленная годовая сумма** делится на число строк контракта в сервисном контракте или контрактном предложении.  
2. Значение поля **Сумма строки** обновляется путем прибавления к нему результата предыдущей операции.  
3. Содержимое полей **Сумма скидки строки**, **Скидка строки (%)** и **Прибыль** обновляется с учетом нового значения поля **Сумма строки** следующим образом:   
    * Сумма скидки строки = Значение строки – Сумма строки.  
    * Скидка строки (%) = Сумма скидки строки / Значение строки * 100.  
    * Прибыль = Сумма строки - Себест. строки  

 Шаги повторяются для каждой строки контракта.  

#### <a name="example"></a>Пример  
Флажок **Разрешить несбаланс. суммы** не установлен в сервисном контракте, который содержит три строки контракта с такой информацией.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|30,00|40,00|0,00|0,00|40,00|10,00|  
|Товар 2|40,00|50,00|10,00|5,00|45,00|5,00|  
|Товар 3|50,00|70,00|10,00|7,00|63,00|13,00|  

Значение поля **Годовая сумма** равно значению поля **Вычисленная годовая сумма**, которое всегда соответствует математической сумме сумм строк. В данном случае оно равно следующему: 40 + 45 + 63 = 148.  

Если изменить **Годовую сумму** на 139, будет вычислено число, которое необходимо прибавить к значению каждого поля **Сумма строки**. Эта сумма рассчитывается как разность значений в полях **Вычисленная годовая сумма** и **Годовая сумма**, поделенная на число строк контракта в данном сервисном контракте. В данном случае оно равно следующему: (139 - 148) / 3 = -3. Затем полученный результат прибавляется к значениям всех полей **Сумма строки**, а поля **Скидка строки (%)**, **Сумма скидки строки** и **Прибыль** обновляются на основе формул из вышеописанной процедуры.  

В результате в строках контракта будет следующая информация.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|30,00|40,00|7,50|3,00|37,00|7,00|  
|Товар 2|40,00|50,00|16.00|8.00|42.00|2.00|  
|Товар 3|50.00|70.00|14.29|10.00|60.00|10.00|  

### <a name="distribution-based-on-line-amount"></a>Распределение на основе суммы строки
При изменении годовой суммы сервисного контракта или предложения по контракту может возникнуть необходимость распределения разницы между новой и расчетной годовыми суммами по строкам контракта. Распределение основано на сумме строки – это автоматический метод распределения, который помогает распределить разницу между новой и расчетной годовыми суммами по суммам строк в строках контракта. Распределение производится пропорционально долям сумм строк в вычисленной годовой сумме. Перечисленные ниже этапы процедуры распределения для каждой строки контракта поясняют основную идею данного метода:  

1. Доля суммы строки (в процентах) рассчитывается следующим образом: значение поля **Сумма строки** делится на сумму значений полей **Вычисленная годовая сумма** по всем строкам контракта.  
2. Значение поля **Сумма строки** обновляется следующим образом: к нему прибавляется разница между новой и вычисленной годовыми суммами, помноженная на долю суммы строки, выраженную в процентах.  
3. Содержимое полей **Сумма скидки строки**, **Скидка строки (%)** и **Прибыль** обновляется в соответствии с новым значением поля **Сумма скидки строки** следующим образом:  

    * Сумма скидки строки = Значение строки – Сумма строки  
    * Скидка строки (%) = Сумма скидки строки / Значение строки * 100  
    * Прибыль = сумма строки - себест. строки  

### <a name="distribution-based-on-line-amount"></a>Распределение на основе суммы строки
При изменении годовой суммы сервисного контракта или предложения по контракту может возникнуть необходимость распределения разницы между новой и расчетной годовыми суммами по строкам контракта. Распределение основано на сумме строки – это автоматический метод распределения, который помогает распределить разницу между новой и расчетной годовыми суммами по суммам строк в строках контракта. Распределение производится пропорционально долям сумм строк в вычисленной годовой сумме. Перечисленные ниже этапы процедуры распределения для каждой строки контракта поясняют основную идею данного метода:  

1. Доля суммы строки (в процентах) рассчитывается следующим образом: значение поля **Сумма строки** делится на сумму значений полей **Вычисленная годовая сумма** по всем строкам контракта.  
2. Значение поля **Сумма строки** обновляется следующим образом: к нему прибавляется разница между новой и вычисленной годовыми суммами, помноженная на долю суммы строки, выраженную в процентах.  
3. Содержимое полей **Сумма скидки строки**, **Скидка строки (%)** и **Прибыль** обновляется в соответствии с новым значением поля **Сумма скидки строки** следующим образом:  

    * Сумма скидки строки = Значение строки – Сумма строки  
    * Скидка строки (%) = Сумма скидки строки / Значение строки * 100  
    * Прибыль = сумма строки - себест. строки  

Шаги повторяются для каждой строки контракта.  

#### <a name="example"></a>Пример  
Флажок **Разрешить несбаланс. суммы** не установлен в сервисном контракте, который содержит три строки контракта с такой информацией.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|15,00|17,00|3,00|0,51|25,00|1,49|  
|Товар 2|20,00|23,00|Нет|0,00|55,10|3,00|  
|Товар 3|24,00|27,00|3,00|0,81|112,70|2,19|  

Значение поля **Годовая сумма** равно значению поля **Вычисленная годовая сумма**, которое всегда соответствует математической сумме сумм строк. В данном случае оно равно следующему: 16,49 + 23,00 + 26,19 = 65,68.  

Если **Годовая сумма** меняется на 60, рассчитается выраженная в процентах доля участия в общей прибыли для каждой строки:  

* Товар 1 – 5 / (5 + 5,1 +12,7) = 0,2193 %  
* Товар 2 – 5.1 / (5 + 5.1 + 12.7) = 0.2237  
* Товар 3 – 12,7 / (5 + 5,1 + 12,7) = 0,557  

Значения поля **Сумма строки** обновляется каждой строки контракта по следующей формуле: Сумма строки = Сумма строки + разница между новой и вычисленной годовыми суммами * доля участия в прибыли (в процентах). Затем значения полей **Сумма скидки строки**, **Скидка строки (%)** и **Прибыль** обновляются по формулам описанной выше процедуры.  

В результате в строках контракта будет следующая информация.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|15,00|17,00|11,41|1,94|15,06|0,06|  
|Товар 2|20,00|23,00|8.65|1.99|21.01|1.01|  
|Товар 3|24.00|27.00|11.37|3.07|23.93|-0,07|  -   Скидка строки (%) = Сумма скидки строки / Значение строки * 100  

#### <a name="example"></a>Пример  
Флажок **Разрешить несбаланс. суммы** не установлен в сервисном контракте, который содержит три строки контракта с такой информацией.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|15,00|17,00|3,00|0,51|25,00|1,49|  
|Товар 2|20,00|23,00|Нет|0,00|55,10|3,00|  
|Товар 3|24,00|27,00|3,00|0,81|112,70|2,19|  

Значение поля **Годовая сумма** равно значению поля **Вычисленная годовая сумма**, которое всегда соответствует математической сумме сумм строк. В данном случае оно равно следующему: 16,49 + 23,00 + 26,19 = 65,68.  

Если **Годовая сумма** меняется на 60, рассчитается выраженная в процентах доля участия в общей прибыли для каждой строки:  

* Товар 1 – 5 / (5 + 5,1 +12,7) = 0,2193 %  
* Товар 2 – 5.1 / (5 + 5.1 + 12.7) = 0.2237  
* Товар 3 – 12,7 / (5 + 5,1 + 12,7) = 0,557  

Значения поля **Сумма строки** обновляется каждой строки контракта по следующей формуле: Сумма строки = Сумма строки + разница между новой и вычисленной годовыми суммами * доля участия в прибыли (в процентах). Затем значения полей **Сумма скидки строки**, **Скидка строки (%)** и **Прибыль** обновляются по формулам описанной выше процедуры.  

В результате в строках контракта будет следующая информация.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|15,00|17,00|11,41|1,94|15,06|0,06|  
|Товар 2|20,00|23,00|8.65|1.99|21.01|1.01|  
|Товар 3|24.00|27.00|11.37|3.07|23.93|-0,07|  

### <a name="distribution-based-on-profit"></a>Распределение на основе прибыли
При изменении годовой суммы сервисного контракта или предложения по контракту может возникнуть необходимость распределения разницы между новой и расчетной годовыми суммами по строкам контракта. Распределение на основе прибыли – это один из методов автоматического распределения, который помогает распределить разницу между новой и расчетной годовыми суммами по суммам строк в строках контракта. Распределение производится пропорционально доли прибыли в общей прибыли контракта или предложения по контракту. Перечисленные ниже этапы процедуры распределения для каждой строки контракта поясняют основную идею данного метода:  

1. Доля участия в общей прибыли (в процентах) рассчитывается следующим образом: значение поля **Прибыль** делится на сумму значений полей **Прибыль** во всех строках контракта.  
2. Значение поля **Сумма строки** обновляется следующим образом: к нему прибавляется разница между новой и вычисленной годовыми суммами, помноженная на долю участия в общей прибыли, выраженную в процентах.  
3. Содержимое полей "Сумма скидки строки", "Скидка строки (%)" и "Прибыль" обновляется с учетом нового значения поля **Сумма строки** следующим образом:  

    * Сумма скидки строки = Значение строки – Сумма строки  
    * Скидка строки (%) = Сумма скидки строки / Значение строки * 100  
    * Прибыль = сумма строки - себест. строки  

#### <a name="example"></a>Пример  
Флажок **Разрешить несбаланс. суммы** не установлен в сервисном контракте, который содержит три строки контракта с такой информацией.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|20,00|25,00|0,00|0,00|25,00|5,00|  
|Товар 2|50,00|58,00|5,00|2,90|55,10|5,10|  
|Товар 3|100,00|115,00|2,00|2,30|112,70|12,70|  

Значение поля **Годовая сумма** равно значению поля **Вычисленная годовая сумма**, которое всегда соответствует математической сумме сумм строк. В данном случае оно равно следующему: 25,00 + 55,10 + 112,70 = 192,80.  

 Если **Годовая сумма** меняется на 180, рассчитается выраженная в процентах доля участия в общей прибыли для каждой строки:  

* Товар 1 – 5 / (5 + 5.1 +1 2.7) = 0.2193 %  
* Товар 2 – 5.1 / (5 + 5.1 + 12.7) = 0.2237  
* Товар 3 – 12,7 / (5 + 5,1 + 12,7) = 0,557  

Значения поля **Сумма строки** обновляется каждой строки контракта по следующей формуле: Сумма строки = Сумма строки + разница между новой и вычисленной годовыми суммами * доля участия в прибыли (в процентах). Затем значения полей **Сумма скидки строки**, **Скидка строки (%)** и **Прибыль** обновляются по формулам из третьего этапа описанной выше процедуры.  

В результате в строках контракта будет следующая информация.  

|Товар|Себестоимость строки|Значение строки|Скидка строки (%)|Сумма скидки строки|Сумма строки|Прибыль|  
|----------|---------------|----------------|---------------------|--------------------------|-----------------|------------|  
|Товар 1|20,00|25,00|11,24|2,81|22,19|2,19|  
|Товар 2|50,00|58,00|9.93|5.76|52.24|2.24|  
|Товар 3|100.00|115.00|8.20|9.43|105.57|5.57|  

## <a name="see-also"></a>См. также  
[Практическое руководство. Создание сервисных контрактов и предложений по сервисному контракту](service-how-to-create-service-contracts-and-service-contract-quotes.md)  
[Настройка управления сервисным обслуживанием](service-setup-service.md)  

