---
title: "Как выполнять полное планирование, MPS и MRP"
description: "Термины «запуск журнала планирования» или «выполнение MRP» относятся к расчету сводного производственного плана и потребностей в материалах на основании фактического и прогнозируемого спроса. Система планирования может рассчитать Сводный план-график (MPS) или План потребностей в материалах (MRP) (по запросу), либо оба плана одновременно."
documentationcenter: 
author: SorenGP
ms.prod: dynamics-nav-2018
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 09/26/2017
ms.author: sgroespe
ms.translationtype: HT
ms.sourcegitcommit: 4fefaef7380ac10836fcac404eea006f55d8556f
ms.openlocfilehash: 851ec29a213925d5508d0dbe8ec429a050823540
ms.contentlocale: ru-ru
ms.lasthandoff: 10/16/2017

---
# <a name="how-to-run-full-planning-mps-or-mrp"></a>Практическое руководство. Выполнение полного планирования, MPS или MRP
Термины «запуск журнала планирования» или «выполнение MRP» относятся к расчету сводного производственного плана и потребностей в материалах на основании фактического и прогнозируемого спроса. Система планирования может рассчитать Сводный план-график (MPS) или План потребностей в материалах (MRP) (по запросу), либо оба плана одновременно.  

-   MPS — это расчет основного плана производства на основании фактического требования и прогноза производства. Вычисление MPS используется для товаров со строкой прогноза или заказа на продажу. Эти товары называются "товары MPS" и определяются динамически после запуска расчета.  
-   MRP — это расчет потребности в материалах на основании фактического требования компонентов и прогноза производства на уровне компонентов. MRP рассчитывается только для товаров, не относящихся к товарам MPS. План MRP предназначен для составления формальных графиков по каждому товару, обеспечивающих своевременную поставку нужных товаров в нужное место и в нужном количестве.  

Алгоритмы планирования, используемые как для MPS, так и для MRP, идентичны. В основе алгоритмов планирования лежит взаимная компенсация, повторное использование существующих заказов на пополнение запасов и указания. Процесс системы планирования выявляет, что требуется или потребуется в будущем (требование), и каковы имеющиеся в наличии или ожидаемые ресурсы (предложение). Когда эти значения количества взаимно компенсируют друг друга, [!INCLUDE[d365fin](includes/d365fin_md.md)] генерирует указания. Указания — это предложения о создании нового заказа, изменении заказа (количества или даты), или отмене заказа. Под термином "заказ" следует понимать заказы на покупку, сборочные заказы, производственные заказы и заказы на перемещение.

Связи, создаваемые механизмом планирования между спросом и связанным с ним предложением, можно отслеживать в окне **Трассировка заказов**. Дополнительные сведения см. в разделе [Практическое руководство. Отслеживание связей между спросом и предложением](production-how-track-demand-supply.md).   

Соответствующие результаты планирования зависят от настроек в карточках товара, сборочных спецификациях и маршрутах.  

## <a name="methods-for-generating-a-plan"></a>Методы генерирования плана  

-   **Вычислить регенеративный план** — эта функция используется для обработки или регенерации материального плана. Этот процесс начинается с удаления всех запланированных заказов загружаются которые в текущий момент. Все товары в базе данных перепланируются.  
-   **Расчет плана оборота**: Эта функция обрабатывает план нетто-изменений. В плане нетто-изменений товары рассматриваются как результат изменений двух типов:  
    - **Изменения спроса/предложения:** сюда входят изменения количества в заказах на продажу, прогнозы производства, сборочные заказы, производственные заказы и заказы на покупку. Незапланированное изменение на уровне склада также считается качественным изменением.  
    - **Планирование изменений параметров:** сюда входят изменения резервного запаса, точки повторного заказа, маршрутов, спецификаций и изменения расчета горизонта планирования или времени упреждения.  
-   **Получить сообщения о действиях**: эта функция предназначена для инструмента краткосрочного планирования и генерирует сообщения о действиях, привлекая внимание пользователя к изменениям, внесенным после последнего расчета регенерационного плана или плана нетто-изменений.  

Для каждого из методов планирования [!INCLUDE[d365fin](includes/d365fin_md.md)] генерирует операции журнала планирования исходя из бесконечных производственных мощностей. Производственные мощности рабочего центра и машинного центра при составлении планов не учитываются.  

> [!IMPORTANT]  
>  Функция "Вычислить регенеративный план" — это наиболее распространенный процесс. Однако функции расчета плана и создания сообщений о действиях могут быть использованы для выполнения процесса "Вычислить план оборота".  
>   
>  В промежутках между выполнением планирования оборотов и регенеративным планированием может выполняться функция составления плана получения указаний, позволяющих в общих чертах узнать о влиянии изменений в плане, однако его нельзя использовать вместо планирования оборотов или полного регенеративного планирования.  

## <a name="to-calculate-the-planning-worksheet"></a>Расчет журнала планирования  
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Журналы планирования**, затем выберите связанную ссылку.  
2.  Выберите действие **Вычислить регенеративный план** для открытия окна **Вычислить план**.  
3.  На экспресс-вкладке **Параметры** заполните поля, как описано в следующей таблице.  

    |Поле|Описанием|  
    |---------------------------------|---------------------------------------|  
    |**MPS**|Выберите, чтобы начать расчет сводного плана производства. При вычислениях учитываются товары с открытыми заказами на продажу или производственные прогнозы.|  
    |**MRP**|Выберите, чтобы начать расчет потребностей в материалах. При вычислениях учитываются товары с зависимыми потребностями. Обычно, MPS и MRP выполняются одновременно. Для одновременного запуска MPS и MRP необходимо установить флажок в поле **Совместный расчет MPS/MRP** на экспресс-вкладке **Планирование** в окне **Производство - настройка**.|  
    |**Дата начала**|Эта дата используется для оценки доступности складских ресурсов. Если запасы товара в наличии ниже точки повторного заказа, система планирует заказ на пополнение запасов с этой даты. Если запасы товара ниже страхового запаса (на начальную дату), система выполняет обратное планирование для создания заказа на пополнение запасов с датой выполнения на заказа начала планирования.|  
    |**Дата окончания**|Это дата окончания горизонта планирования. Ни спрос, ни предложение после этой даты не учитываются. Если цикл повторного заказа товара превышает дату окончания, эффективный горизонт планирования для этого товара равен дата заказа + цикл повтора заказа.<br /><br /> Горизонт планирования - это срок, на который распространяется план. Если горизонт слишком короткий, товары с более длительным временем упреждения не будут заказаны вовремя. Если горизонт слишком большой, уходит слишком много времени на просмотр и обработку информации, которая может измениться до того времени, как она потребуется. Существует возможность задать один горизонт планирования для производства и более длительный - для закупок, хотя это не требуется. Горизонт планирования для закупок и производства должен быть таким, чтобы покрывал суммарное время упреждения для компонентов.|  
    |**Остановить и показать первую ошибку**|Выберите, если необходимо, чтобы планирование останавливалось при возникновении ошибки. Одновременно отобразится сообщение со сведениями о первой ошибке. Если есть ошибка, в журнале планирования будут показаны только правильные строки, завершенные до выявления ошибки. Если флажок в этом поле не установлен, пакетное задание **Вычислить план** будет выполняться до завершения, то есть оно не будет прервано ошибками. При возникновении одной или нескольких ошибок по завершении отобразится сообщение о том, сколько товаров было затронуто ошибками. Откроется окно **Журнал ошибок планирования**, содержащий дополнительные сведения об ошибке и ссылки на соответствующие карточки товара.|  
    |**Использовать прогноз**|Выберите прогноз, который следует включить в качестве спроса при запуске пакетного задания планирования. Прогноз по умолчанию настраивается на экспресс-вкладке **Планирование** в окне **Производство - настройка**.|  
    |**Исключить предыдущий прогноз**|Определите, какую часть от выбранного прогноза включить в планирование - для этого вводится дата, данные до которой не включаются в прогноз. Это позволяет исключить устаревшую информацию.|  
    |**Учесть параметры планирования для предупреждений об исключениях**|По умолчанию это поле выбрано.<br /><br /> Поставка в строках планирования с предупреждениями обычно не изменяется в соответствии с параметрами планирования. Вместо этого, система планирования только предлагает поставку для покрытия конкретного требуемого количества. Однако можно выполнить настройку таким образом, чтобы использовались определенные параметры планирования для строк планирования с определенными предупреждениями.<br /><br />|  

4.  На экспресс-вкладке **Товар** задайте фильтры для запуска процедуры планирования по товару, описанию товара или складу.  
5.  Нажмите кнопку **ОК**. Будет запущено пакетное задание, а в журнале планирования введены строки планирования.  

## <a name="to-perform-action-messages"></a>Выполнение сообщений о действиях  
1.  В окне **Журнал планирования** выберите действие **Выполнить указание**.  
2.  На экспресс-вкладке **Параметры** укажите, как создать запасы. Введите значения в поля, как описано в следующей таблице.  

    |Поле|Описанием|  
    |---------------------------------|---------------------------------------|  
    |**Производственный заказ**|Укажите способ создания производственных заказов. Это можно сделать непосредственно из предложений по строкам планирования. Можно создавать спланированные и подтвержденные производственные заказы.|  
    |**Сборочный заказ**|Укажите способ создания сборочных заказов. Это можно сделать непосредственно из предложений по строкам планирования.|  
    |**Заказ на покупку**|Укажите способ создания заказов на покупку. Это можно сделать непосредственно из предложений по строкам планирования.<br /><br /> Если вы решили скопировать предложения плана для заказов на покупку в заявку, выберите шаблон и имя листа.|  
    |**Заказ на перемещение**|Укажите способ создания заказов на перемещение. Это можно сделать непосредственно из предложений по строкам планирования.<br /><br /> Если вы решили скопировать предложения плана для заказов на перемещение в заявку, выберите шаблон и имя листа.|  
    |**Объединить заказы на перемещение**|Выберите, если необходимо объединить заказы на перемещение.|  
    |**Остановить и показать первую ошибку**|Выберите, чтобы пакетное задание останавливалось, как только произойдет ошибка **Выполнение указаний — план**. Одновременно отобразится сообщение со сведениями о первой ошибке. Если есть ошибка, только строки планирования, обработанные до обнаружения первой ошибки, создадут заказы предложения.|  

3.  На экспресс-вкладке **Строка планирования** можно устанавливать фильтры для ограничения объема указаний.  
4.  Нажмите кнопку **ОК**.  

После выполнения сообщения о действии пакетное задание удаляет строки в журнале планирования. Другие строки остаются в журнале планирования до принятия в дальнейшем или удаления. Строки можно также удалять вручную.  

## <a name="action-messages"></a>Сообщения о действиях  
Указания генерируются системой трассировки заказов, если не удается достичь баланса в рамках существующей сети заказов. Их можно рассматривать как предложение обработать изменения, чтобы восстановить равновесие между спросом и предложением.  

Создание сообщений о действиях происходит поочередно на каждом уровне с учетом низкоуровневого кода каждого товара. Это гарантирует учет всех товаров, на которые влияют изменения в спросе или поставке в прошлом или в будущем.  

Чтобы отсечь незначительные, избыточные или неважные сообщения о действиях, пользователь может создать фильтры, которые пропускают сообщения только о тех изменениях, которые превышают заданное количество или число дней.  

После просмотра сообщений о действиях и определения необходимости принять все предлагаемые изменения или их часть выберите поле **Принять указания**, поле чего можно будет соответствующим образом обновить планы.  

> [!NOTE]  
>  Указание — это предложение создать новый заказ, отменить заказ или изменить количество либо дату заказа. Заказ - это заказ на покупку, заказ на перемещение или производственный заказ.  

В ответ на любые отклонения от равновесия между спросом и предложением создаются следующие сообщения о действиях.  

|Указание|Описанием|  
|--------------------|---------------------------------------|  
|**Новый**|Если не удается удовлетворить спрос с помощью сообщений о действиях **Изменение кол-ва**, **Перепланирование** или **Переплан. и изменение** в существующих заказах, генерируется сообщение о действии **Новый**, которое предлагает создать новый заказ. Кроме того, будет создано сообщение **Новый**, если в цикле повторного заказа нет заказов на поставку нужного товара. Этот параметр определяет количество прошлых и будущих периодов в профиле доступности при выполнении поиска заказа для перепланирования.|  
|**Изменение кол-ва**|В случае количественных изменений спроса, связанных с заказами на поставку, создается сообщение о действии **Изменить кол-во**, которое указывает на необходимость изменения соответствующих поставок в связи с изменениями в спросе. Если возникает новый спрос, [!INCLUDE[d365fin](includes/d365fin_md.md)] ищет ближайший действующий незарезервированный заказ на поставку в пределах цикла повторного заказа, и генерирует для данного заказа указание "Изменить".|  
|**Перепланирование**|Если в заказе предложения или спроса изменена дата и это вызвало дисбаланс в сети заказов, система генерирует сообщение о действии **Перепланирование**. Если имеется соотношение один-к-одному между спросом и предложением, генерируется сообщение о действии с предложением переместить соответствующим образом заказ предложения. Если заказ предложения обеспечивает спрос со стороны нескольких заказов на продажу, заказ предложения перепланируется по дате первого спроса.|  
|**Перепл. и изм. кол-ва**|Если в заказе изменены и дата, и количество, необходимо изменить планы с учетом обоих обстоятельств. Система указаний объединяет оба действия в одном сообщении: **Переплан. и изм. кол-во**, чтобы обеспечить восстановление баланса сети заказов.|  
|**Отмена**|В случае удаления спроса, который удовлетворялся от заказа к заказу генерируется сообщение о действии для отмены соответствующих заказов предложения. Если тип связи отличается от "заказ-заказ", генерируется сообщение действия изменения, чтобы уменьшить предложение. Если из-за других факторов, например, корректировки склада, заказ предложения не требуется на момент генерирования пользователем сообщения о действии, [!INCLUDE[d365fin](includes/d365fin_md.md)] предлагает в журнале планирования указание **Отмена**.|  

## <a name="see-also"></a>См. также  
[Планирование](production-planning.md)  
[Настройка производства](production-configure-production-processes.md)  
[Производство](production-manage-manufacturing.md)    
[Наличие](inventory-manage-inventory.md)  
[Покупки](purchasing-manage-purchasing.md)  
[Сведения о проектировании: планирование поставок](design-details-supply-planning.md)   
[Рекомендации по настройке. Планирование поставок](setup-best-practices-supply-planning.md)  
[Работа с [!INCLUDE[d365fin](includes/d365fin_md.md)]](ui-work-product.md)

