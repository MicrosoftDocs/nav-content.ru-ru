---
title: "Использование OCR для преобразования PDF в электронные счета"
description: "Описывает процедуру использования службы OCR для преобразования входящих PDF или графических файлов в электронные документы в Dynamics NAV."
documentationcenter: 
author: SorenGP
ms.prod: dynamics-nav-2017
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: electronic document, e-invoice, incoming document, OCR, ecommerce, document exchange, import invoice
ms.date: 06/02/2017
ms.author: sgroespe
ms.translationtype: HT
ms.sourcegitcommit: 4fefaef7380ac10836fcac404eea006f55d8556f
ms.openlocfilehash: b7eff4821a51cc4aed190ed3c459aa6117333ae9
ms.contentlocale: ru-ru
ms.lasthandoff: 10/16/2017

---
# <a name="how-to-use-ocr-to-turn-pdf-and-image-files-into-electronic-documents"></a>Практическое руководство. Использование OCR для преобразования PDF-файлов и графических файлов в электронные документы
Из PDF-файлов или файлов изображений, получаемых от торговых партнеров, с помощью внешнего сервиса OCR (оптическое распознавание символов) можно создавать электронные документы, подходящие для преобразования в записи документов в [!INCLUDE[d365fin](includes/d365fin_md.md)]. Например, при получении от поставщика счета в формате PDF можно отправить его в службу OCR в окне **Входящие документы**. Это описано в первой процедуре.

В качестве альтернативы для отправки файла из окна **Входящие документы** можно отправить файл в службу OCR по электронной почте. Затем, когда вы получите документ обратно, автоматически создается соответствующая запись входящего документа. Это описано во второй процедуре.

Спустя несколько секунд файл будет возвращен из службы OCR в виде электронного счета, который может быть преобразован в счет покупки для этого поставщика. Это описано в третьей процедуре.

Поскольку процесс сканирования основан на оптическом распознавании, существует вероятность, что служба сканирования интерпретирует символы в ваших PDF-файлах или файлах изображений неправильно, например, при первой обработке документов от определенного поставщика. Он может не распознать логотип компании как наименование поставщика, или неправильно интерпретировать итоговую сумму в квитанции из-за ее расположения. Чтобы избежать подобных ошибок в дальнейшем, можно исправить данные, в отдельной версии окна **Входящие документы**. После этого корректировки отправляются обратно в службу OCR, чтобы ошибки были правильно распознаны в следующий раз при обработке PDF-файла или файла изображения от этого поставщика. Дополнительные сведения см. в разделе "Обучение службы OCR для предотвращения ошибок".

Перемещение файлов в службу OCR и обратно обрабатывается специальной операцией очереди заданий, которые создаются автоматически при включении соединения со связанной службой. Дополнительные сведения см. в разделе [Практическое руководство. Настройка входящих документов](across-how-setup-income-documents.md).

## <a name="to-send-a-pdf-or-image-file-to-the-ocr-service-from-the-incoming-documents-window"></a>Отправка PDF-файла или файла изображения в службу OCR из окна **Входящие документы**
1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Входящие документы**, а затем выберите связанную ссылку.
2. Создайте новую запись входящего документа и прикрепите файл. Дополнительные сведения см. в разделе [Практическое руководство. Создание записей входящих документов](across-how-create-income-document-records.md).  
3. В окне **Входящие документы** выберите одну или несколько строк, а затем выберите действие **Отправить в очередь работ**.

    Значение в поле **Статус OCR** будет изменено на **Готово**. Прикрепленный PDF-файл или файл изображения отправляется в службу OCR очередью заданий по расписанию при условии отсутствия ошибок.
4. В качестве альтернативы в окне **Входящие документы** выберите одну или несколько строк, а затем выберите действие **Отправить в службу сканирования**.

Значение в поле **Статус OCR** изменяется на **Отправлено** при условии отсутствия ошибок.

## <a name="to-send-a-pdf-or-image-file-to-the-ocr-service-by-email"></a>Отправка PDF-файла или файла изображения в службу OCR по электронной почте
Из приложения электронной почты вы можете отправить сообщение электронной почты поставщику службы OCR с прикрепленным PDF-файлом или файлом изображения. Дополнительные сведения об адресе электронной почты получателя см. на веб-сайте поставщика службы OCR.

Поскольку запись входящего документа для файла отсутствует, при получении готового электронного документа из службы OCR в окне **Входящие документы** автоматически будет создана новая запись. Дополнительные сведения см. в разделе [Практическое руководство. Создание записей входящих документов](across-how-create-income-document-records.md).

> [!NOTE]  
>   Если вы используете планшет или телефон, вы можете отправить файл в службу OCR сразу после создания фотографии документа или создать входящий документ напрямую. Дополнительные сведения см. в подразделе "Создание записей входящих документов по фотографии" раздела [Практическое руководство. Создание записей входящих документов](across-how-create-income-document-records.md).

## <a name="to-receive-the-resulting-electronic-document-from-the-ocr-service"></a>Чтобы получить созданный электронный документ из службы OCR.
Электронный документ, созданный службой OCR из файла PDF или изображения, автоматически получается в окне **Входящие документы** с помощью записи очереди работ, которая была настроена при включении службы OCR.

Если очередь заданий не используются или если необходимо получить готовый документ OCR быстрее, чем запланировано в расписании очереди заданий, можно нажать кнопку **Получить из службы OCR**. Будут получены все документы, уже обработанные службой OCR.

> [!NOTE]  
>   Если в службе OCR настроено требование ручной проверки обработанных документов, поле **Статус OCR** будет содержать значение **Ожидает проверки**. В этом случае выполните следующие действия, чтобы выполнить вход на веб-сайт службы OCR для проверки OCR-документа вручную.

1. В поле **Статус OCR** выберите гиперссылку **Ожидает проверки**. Можно также выбрать плитку **Ожидает проверки** на главной странице.
2. На веб-сайте службы OCR выполните вход с помощью учетных данных вашей учетной записи службы OCR. Это те учетные данные, которые использовались при настройке этой службы. Дополнительные сведения см. в пункте "Настройка службы OCR" в разделе [Практическое руководство. Настройка входящих документов](across-how-setup-income-documents.md).

    Если доступ к веб-сайт производится из поля **Статус OCR**, требуемый документ отображается немедленно после выполнения входа. Если доступ на веб-сайт производится путем выбора плитки на начальной странице, на первой открывшейся странице службы OCR необходимо выбрать кнопку **Старт** на вкладке **Проверка** или дважды щелкнуть документ, который необходимо проверить.

    Отображается информация для документа OCR, которая показывает как исходное содержимое PDF-файла или графического файла, так и итоговые значения поля OCR.
3. Просмотрите различные значения полей и вручную измените или введите значения в полях, которые служба OCR пометила, как распознанные неуверенно.
4. Нажмите кнопку **ОК**. Процесс OCR завершается, и итоговый электронный документ отправляется в окно **Входящие документы** в [!INCLUDE[d365fin](includes/d365fin_md.md)] в соответствии с расписанием очереди работ.

    Если доступ к веб-сайту производится путем выбора плитки на начальной странице, на веб-сайте автоматически отображаются любые другие документы OCR, требующие проверки.
5. Повторите шаг 4 для любого документа OCR, который требуется проверить.

Теперь можно переходить к созданию записей документов для полученных электронных документов в [!INCLUDE[d365fin](includes/d365fin_md.md)] вручную или автоматически. Дополнительные сведения см. в следующей процедуре. Также можно связать новую запись входящего документа с существующим учтенным или неучтенным документом, чтобы обеспечить простой доступ к исходному файлу из [!INCLUDE[d365fin](includes/d365fin_md.md)]. Дополнительные сведения см. в разделе [Обработка входящих документов](across-process-income-documents.md).

## <a name="to-create-a-purchase-invoice-from-an-electronic-document-received-from-the-ocr-service"></a>Создание счета покупки из электронного документа, полученного из службы OCR
В следующей процедуре описывается создание записи счета покупки на основе счета поставщика, полученного как электронный документ из службы OCR. Процедура совпадает с процедурой создания, например, строки финансового журнала из расходной квитанции.

> [!NOTE]  
>   Поля **Описание** и **№** в созданных строках документа будут заполняться только в том случае, если предварительно текст, найденный в документе OCR, был сопоставлен этим двум полям в [!INCLUDE[d365fin](includes/d365fin_md.md)]. Это можно сделать либо в виде перекрестных ссылок, для строк документа с типом "товар", либо в виде сопоставлений текста со счетом для документа или строк журнала с типом "Счет ГК". Дополнительные сведения см. в подсказке для действия **Перекрестные ссылки** на карточке товара и в связанной процедуре [Практическое руководство. Сопоставление текста на регулярных платежах по счетам для автоматической выверки](receivables-how-map-text-recurring-payments-accounts-auto-reconcilliation.md).

Для входящих документов обычно используется действие **Определить соответствие текста счетам** для задания, что определенный текст в счете поставщика, полученного из службы OCR, сопоставляется определенному счету поставщика. После этого любая часть описания входящего документа, которая существует в качестве сопоставления текста, означает, что поле **№** в получающемся документе или строках журнала типа "Счет ГК", заполняются данными соответствующего поставщика.

В дополнение к сопоставлению со счетом поставщика или другими счетами ГК, также возможно сопоставление с банковским счетом. Это удобно, например, для электронных документов для расходов, которые уже оплачены при создании строки финансового журнала, которая готова к учету на банковском счете.

1. Выберите строку входящего документа для электронного документа поставщика, полученного из службы OCR.
2. Чтобы сопоставить текст в документе со счетом поставщика, дебетовым счетом, выберите действие **Определить соответствие текста счетам**, затем введите в окно **Сопоставление текста со счетами** информацию, которая впредь будет применяться к поставщику. Дополнительные сведения см. в разделе [Практическое руководство. Сопоставление текста на типовых платежах со счетами для автоматической выверки](receivables-how-map-text-recurring-payments-accounts-auto-reconcilliation.md).
3. Чтобы сопоставить номера товара в документе с вашими описаниями товаров поставщика, откройте карточку каждого товара, затем выберите действие **Перекрестные ссылки** для настройки перекрестных ссылок между вашими описаниями товара и описаниями поставщика.
4. В окне **Входящих документов** выберите действие **Создать документ**.

Счет покупки будет создан [!INCLUDE[d365fin](includes/d365fin_md.md)] на основе информации в электронном документе поставщика, полученном из сервиса OCR.

Любые ошибки проверки, обычно связанные с некорректностью или отсутствием данных в [!INCLUDE[d365fin](includes/d365fin_md.md)], будут представлены на экспресс-вкладке **Ошибки и предупреждения**. Для получения дополнительной информации см. раздел "Обработка ошибок при получении электронного документа".

## <a name="to-handle-errors-when-receiving-electronic-documents"></a>Обработка ошибок при получении электронных документов
1. В окне **Входящие документы** выберите строку, для электронного документа, полученного из службы OCR с ошибками. Это отображается значением "Ошибка" в поле **Статус OCR**.
2. Выберите действие **Правка**, чтобы открыть окно **Входящие документы**.
3. На экспресс-вкладке **Ошибки и предупреждения** выберите сообщение, затем выберите действие **Открыть связанную запись**.
4. Откроется окно, содержащее неверные или отсутствующие данные — например, карточка клиента с отсутствующим значением поля.
5. Исправьте ошибку или ошибки, как описано в каждом сообщении об ошибке.
6. Продолжите обработку входящего электронного документа, повторно выбрав действие **Создать вручную**.
7. Повторите шаги 5 и 6 для всех оставшихся ошибок, пока электронный документ не будет получен успешно.

## <a name="to-train-the-ocr-service-to-avoid-errors"></a>Обучение службы OCR для предотвращения ошибок
Поскольку процесс сканирования основан на оптическом распознавании, существует вероятность, что служба сканирования интерпретирует символы в ваших PDF-файлах или файлах изображений неправильно, например, при первой обработке документов от определенного поставщика. Он может не распознать логотип компании как наименование поставщика, или неправильно интерпретировать итоговую сумму в расходной квитанции из-за ее расположения. Чтобы избежать подобных ошибок в дальнейшем, можно исправить данные, полученные от службы распознавания, и отправить обратную связь в службу.

Окно **Корректировка данных OCR**, которое можно открыть из окна **Входящий документ**, показывает поля экспресс-вкладки **Финансовая информация** в двух столбцах: один содержит редактируемые данные сканирования, а другой — данные сканирования, доступные только для чтения. При нажатии кнопки **Отправить отзыв OCR** содержимое окна **Корректировка данных OCR** отправляется в службу сканирования. При следующей обработке службой PDF-файлов или файлов изображений, содержащих такие же данные, ваши исправления будут учтены, чтобы избежать повторения ошибок.

1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Входящие документы**, а затем выберите связанную ссылку.
2. Откройте запись входящего документа, содержащую данные, полученные от службы OCR, которые необходимо исправить.
3. В окне **Входящий документ** выберите действие **Исправить данные OCR**.
4. В окне **Корректировка данных OCR** перезапишите данные в доступном для редактирования столбце для каждого поля с неправильным значением.
5. Чтобы отменить внесенных с момента открытия окна **Корректировка данных OCR** исправления, выберите действие **Сбросить данные OCR**.
6. Для отправки исправлений в службу OCR выберите действие **Отправить отзыв OCR**.
7. Для сохранения исправлений закройте окно **Корректировка данных OCR**.

Поля на экспресс-вкладке **Финансовые сведения** в окне **Входящий документ** будут обновлены с внесением новых значений, введенных на шаге 4.

## <a name="see-also"></a>См. также
[Обработка входящих документов](across-process-income-documents.md)  
[Входящие документы](across-income-documents.md)  
[Покупки](purchasing-manage-purchasing.md)  
[Работа с [!INCLUDE[d365fin](includes/d365fin_md.md)]](ui-work-product.md)

