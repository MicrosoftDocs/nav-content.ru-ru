---
title: "Как рассчитывать сроки планирования заказов"
description: "Функция расчета сроков позволяет рассчитать ближайшую дату, в которую товарная позиция будет доступна для отгрузки или доставки. Кроме того, с ее помощью создаются строки заявок для принимаемых дат."
documentationcenter: 
author: SorenGP
ms.prod: dynamics-nav-2017
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 08/10/2017
ms.author: sgroespe
ms.translationtype: HT
ms.sourcegitcommit: 4fefaef7380ac10836fcac404eea006f55d8556f
ms.openlocfilehash: 5c2167397d95d04c937ddf1820e6e9edff906b2f
ms.contentlocale: ru-ru
ms.lasthandoff: 10/16/2017

---
# <a name="how-to-calculate-order-promising-dates"></a>Практическое руководство. Расчет сроков планирования заказов
Организация должна иметь возможность информировать клиентов о датах доставки заказов. С помощью окна **Строки планирования заказов** это можно сделать из строки заказа на продажу.  

На основе известных и ожидаемых дат доступности для товара [!INCLUDE[d365fin](includes/d365fin_md.md)] немедленно вычисляет даты отгрузки и доставки, которые затем могут быть обещаны клиенту.  

Если в строке заказа продажи задана требуемая дата отгрузки, эта дата будет использована в качестве отправной точки для следующих расчетов:  

- требуемая дата доставки - время отгрузки = плановая дата поставки  
- плановая дата поставки - исходящие - время обработки склада = дата поставки  

Если на дату отгрузки товар имеется в наличии, процесс продажи может быть продолжен. Если на дату отгрузки товар отсутствует, отображается предупреждение контроля склада.  

Если не указать требуемую дату доставки в строке заказа продажи, либо если соблюсти требуемая дата доставки невозможно, вычисляется самая ранняя дата, на которую доступны товары. Затем эта дата вводится в поле **Дата отгрузки** в строке, и дата, в которую планируется отгрузки товаров, а также дата, в которую они будут доставлены клиенту, рассчитываются по следующим формулам:  

- дата отгрузки + исходящие - время обработки склада = плановая дата отгрузки  
- плановая дата поставки + время отгрузки = плановая дата доставки  

## <a name="about-order-promising"></a>О планировании заказов
Функция планирования заказов позволяет дать обещание отгрузить или доставить заказ в конкретный день. Рассчитывается дата, когда товар будет свободен для обещания или возможен для обещания, и создаются строки заказа для утвержденных дат. Функция рассчитывает ближайшую дату, в которую товарная позиция будет доступна для отгрузки или доставки. Она также создает строки заявок, в случае если товары необходимо сначала купить, ,для тех дат, которые вы принимаете.

[!INCLUDE[d365fin](includes/d365fin_md.md)] использует две основные концепции:  

- Доступно для распределения (ATP)  
- В наличии (CTP)  

### <a name="available-to-promise"></a>Доступно для распределения  
"Доступно для распределения (ATP)" рассчитывает даты на основе системы резервирования. Он выполняет проверку наличия незарезервированных количеств в складских запасах с учетом запланированного производства, покупок, перемещений и возвратов продаж. На основе этой информации [!INCLUDE[d365fin](includes/d365fin_md.md)] автоматически вычисляет дату доставки заказа клиента, поскольку товары доступны, будь то в виде запасов или плановых поступлений.  

### <a name="capable-to-promise"></a>В наличии  
"В наличии" (CTP) предполагает сценарий "что если", в котором товар отсутствует в запасах и не запланированы никакие заказы. На основе этого сценария [!INCLUDE[d365fin](includes/d365fin_md.md)] рассчитывает наиболее раннюю дату, когда товар может быть доступен, если он должен быть изготовлен, закуплен или перемещен.  


### <a name="calculations"></a>Расчеты  
Когда [!INCLUDE[d365fin](includes/d365fin_md.md)] вычисляет дату доставки клиента, выполняются две задачи:  

- Вычисляет наиболее раннюю дату доставки, когда клиент не запрашивал конкретную дату доставки.  
- Проверяет, запрашивал ли клиент дату доставки и можно ли уложиться в обещанные клиенту сроки.  

Если клиент не запрашивает конкретную дату доставки, дата отгрузки приравнивается к рабочей дате, и складское наличие основывается на этой дате. Если товар на складе, [!INCLUDE[d365fin](includes/d365fin_md.md)] вычисляет время доставки заказа. Это выполняется следующими формулами:  

- Дата поставки + Исходящий склад + Плановая отгрузка + Время обработки = Дата  
- Плановая дата поставки + Время отгрузки = Плановая дата доставки  

[!INCLUDE[d365fin](includes/d365fin_md.md)] затем проверяет реалистичность вычисленной даты доставки путем обратного вычисления во времени, чтобы определить, когда товар должен быть в наличии для соблюдения обещанной даты. Это выполняется следующими формулами:  

- Плановая дата доставки - Время отгрузки = Плановая дата поставки  
- Плановая дата поставки - Исходящие - обработка склада = Дата поставки  

Дата отгрузки используется для выполнения проверки наличия. Если товар доступен на эту дату, [!INCLUDE[d365fin](includes/d365fin_md.md)] подтверждает, что запрошенная/обещанная доставка может осуществиться путем установки даты плановой доставки на дату запрошенной/обещанной доставки. Если товар отсутствует, то возвращается пустая дата, и обработчик заказов может затем использовать функцию CTP.  

На основе новых значений даты и времени рассчитываются все связанные даты согласно формулам, указанным ранее в этом разделе. Расчет CTP выполняется дольше, но он дает точные данные, когда клиенту требуется доставка товара. Даты, вычисляемые на основе CTP, представлены в полях **Плановая дата доставки** и **Самая ранняя дата отгрузки** в окне **Строки планирования заказов**.  

Обработчик заказов завершает процесс CTP путем принятия дат. Это означает, что строка планирования и операция резервирования создаются для товара до расчетных дат для обеспечения выполнения заказа.  

В добавление к внешнему заказу, который можно выполнить в окне **Строки планирования заказов**, можно также определить даты внутренней или внешней доставки для товаров по спецификации. Дополнительные сведения см. в разделе [Практическое руководство. Просмотр наличия товаров](inventory-how-availability-overview.md).

## <a name="to-set-up-order-promising"></a>Настройка планирования заказов  
1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Настройка планирования заказов**, а затем выберите связанную ссылку.  
2. Введите число и код единицы времени в поле **Смещение (время)**. Выберите один из следующих кодов.  

    |Код|Описание|  
    |----------|-----------------|  
    |**д**|Календарный день|  
    |**w**|Неделя|  
    |**м**|Месяц|  
    |**к**|Квартал|  
    |**г**|Год|  

    Например, «3н» указывает на то, что время смещения составляет три недели. Для обозначения текущего периода используйте префикс "т" с любым из этих кодов. Например, если для времени смещения следует указать текущий месяц, введите **тм**.  
3. Введите серию номеров в поле **Серия номеров планирования заказов**, выбрав строку из списка в окне **Серии номеров**.  
4. Введите шаблон расчета сроков в поле **Шаблон планирования заказов**, выбрав строку из списка в окне **Шаблоны журналов заявок - список**.  
5. Укажите журнал заявок в поле **Журнал планирования заказов**, выбрав строку из списка в окне **Названия журналов заявок**.

### <a name="to-enter-inbound-warehouse-handling-time-in-the-inventory-setup-window"></a>Ввод времени обработки на складе входящих товаров в окно настройки запасов  
Если требуется учитывать в расчетах входящее время обработки склада при планировании заказов в строке покупки, для запаса и склада это можно задать в качестве поведения по умолчанию.    
1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Настройка модуля "Запасы"**, а затем выберите связанную ссылку.  
2. На экспресс-вкладке **Общее** в поле **Входящие - время обработки склада** введите количество дней, которые необходимо учитывать в расчетах при планировании заказов.  

> [!NOTE]  
>  Если для склада в **карточке склада** заполнено поле **Входящие - время обработки склада**, то его содержимое будет использоваться в качестве времени обработки входящего склада по умолчанию.  

### <a name="to-enter-inbound-warehouse-handling-time-on-location-cards"></a>Ввод времени обработки на складе входящих товаров в карточках складов  
1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Склад**, затем выберите связанную ссылку.  
2.  Откройте соответствующую карточку склада.  
3.  На экспресс-вкладке **Склад** в поле **Входящие - время обработки склада** введите число дней, которые должны учитываться в расчетах при планировании заказов.  

> [!NOTE]  
>  Если оставить поле **Входящие — время обработки склада** пустым, при подсчете используется значение, заданное в окне **Настройка товаров**.

### <a name="to-enter-outbound-warehouse-handling-time-in-the-inventory-setup-window"></a>Ввод времени обработки на складе исходящих товаров в окно настройки запасов  
Если требуется настроить исходящее время обработки склада для включения в калькуляцию перемещения заказа в строке продажи, его можно настроить по умолчанию для складского запаса.

1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Настройка модуля "Запасы"**, а затем выберите связанную ссылку.  
2. На экспресс-вкладке **Общее** в поле **Исходящие - время обработки склада** введите количество дней, которые нужно учитывать в расчетах при планировании заказов.  

> [!NOTE]  
>  Если для склада на карточке склада заполнено поле **Исходящие - время обработки склада**, то его содержимое будет использоваться в качестве времени обработки исходящего склада по умолчанию.  

### <a name="to-enter-outbound-warehouse-handling-time-on-location-cards"></a>Ввод времени обработки на складе исходящих товаров в карточках складов  
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Склады**, а затем выберите связанную ссылку.  
2.  Откройте соответствующую карточку склада.  
3.  На экспресс-вкладке **Склад** в поле **Исходящие - время обработки склада** введите число дней, которые должны учитываться в расчетах при планировании заказов.  

> [!NOTE]  
>  Если оставить поле **Исходящие — время обработки склада** пустым, при подсчете используется значение, заданное в окне **Настройка товаров**.

## <a name="to-make-an-item-critical"></a>Создание критического товара  
Чтобы товар можно было включить в расчет планирования заказа, его необходимо отметить как критически важный. Эта настройка гарантирует, что некритические товары не вызывают неуместные расчеты планирования заказов.   
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Товары**, а затем выберите связанную ссылку.  
2.  Откройте соответствующую карточку товара.  
3.  На экспресс-вкладке **Планирование** выберите поле **Критический**.  

## <a name="to-calculate-an-order-promising-date"></a>Расчет сроков планирования заказов  
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Заказ на продажу**, а затем выберите связанную ссылку.  
2.  Откройте соответствующий заказ на продажу и выберите строки заказа на продажу для расчета в программе.  
3.  Выберите действие **Планирование заказов**, затем выберите действие **Строки планирования заказов**.  
4.  Выберите строку, затем выберите один из следующих вариантов:  

    - Если требуется рассчитать ближайшую дату, когда товар будет доступен по складу, запланированному поступлению и суммарной потребности, выберите **Доступно для распределения**.  
    - Если известно, что в настоящее время товар отсутствует на складе и требуется рассчитать ближайшую дату, когда товар будет доступен путем подачи новых заявок на пополнение запасов, выберите **В наличии**.  
5.  Нажмите кнопку **Принять**, чтобы принять ближайшую доступную дату отгрузки.  

## <a name="see-also"></a>См. также  
[Продажи](sales-manage-sales.md)  
[Расчет даты для покупок](purchasing-date-calculation-for-purchases.md)  
[Работа с [!INCLUDE[d365fin](includes/d365fin_md.md)]](ui-work-product.md)

