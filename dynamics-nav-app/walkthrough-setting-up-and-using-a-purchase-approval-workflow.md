---
title: "Пошаговое руководство — настройка и использование рабочего процесса утверждения покупки"
description: "Можно автоматизировать процесс утверждения новых или измененных записей, например документов, строк журнала и карточек клиента, путем создания рабочих процессов с шагами для соответствующих утверждений. Перед созданием рабочих процессов утверждения необходимо задать утверждающего и заместителя утверждающего для каждого пользователя. Также можно установить предельные суммы для утверждающих, чтобы определить, какие записи продаж и покупок им разрешается утверждать. Запросы на утверждение и другие уведомления можно отправлять по электронной почте или как внутренние записки. Для каждого пользователя также можно указать время получения ими уведомлений."
documentationcenter: 
author: SorenGP
ms.prod: dynamics-nav-2018
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 07/01/2017
ms.author: sgroespe
ms.translationtype: HT
ms.sourcegitcommit: 4fefaef7380ac10836fcac404eea006f55d8556f
ms.openlocfilehash: b4498e8f32349d37d0f9efadfb1bbcf6000e3e7f
ms.contentlocale: ru-ru
ms.lasthandoff: 10/16/2017

---
# <a name="walkthrough-setting-up-and-using-a-purchase-approval-workflow"></a>Пошаговое руководство. Настройка и использование рабочего процесса утверждения покупки
Можно автоматизировать процесс утверждения новых или измененных записей, например документов, строк журнала и карточек клиента, путем создания рабочих процессов с шагами для соответствующих утверждений. Перед созданием рабочих процессов утверждения необходимо задать утверждающего и заместителя утверждающего для каждого пользователя. Также можно установить предельные суммы для утверждающих, чтобы определить, какие записи продаж и покупок им разрешается утверждать. Запросы на утверждение и другие уведомления можно отправлять по электронной почте или как внутренние записки. Для каждого пользователя также можно указать время получения ими уведомлений.  

 Можно настроить и использовать рабочие процессы, связывающие задачи бизнес-процесса, выполняемые различными пользователями. Системные задачи, такие как автоматический учет, могут включаться в качестве шагов рабочего процесса, предшествующих задачам пользователя или выполняемых после них. Типичные шаги рабочего процесса – запрос и выдача разрешения на создание новых записей. Дополнительные сведения см. в разделе [Рабочий процесс](across-workflow.md).  

## <a name="about-this-walkthrough"></a>Об этом пошаговом руководстве  
В этом пошаговом руководстве рассматриваются следующие задачи:  

-   Настройка пользователей утверждения (включая настройку пользователя в Windows и в [!INCLUDE[d365fin](includes/d365fin_md.md)]).  
-   Настройка уведомлений для пользователей утверждения  
-   Изменение и включение рабочего процесса утверждения.  
-   Запуск очереди работ для отправки уведомлений.  
-   Запрос утверждения заказа на покупку, как у Алисии.  
-   Получение уведомления с утверждением запроса, как у Шона.  

## <a name="prerequisites"></a>Предварительные требования  
Для выполнения этого пошагового руководства необходима демонстрационная организация "CRONUS Россия ЗАО".

## <a name="story"></a>Сюжет  
Шон — привилегированный пользователь организации CRONUS на своем компьютере.  

Он создает два пользователя утверждения. Один – Алисия, которая представляет агента по закупкам. Другой – сам Шон, который представляет утверждающего для Алисии. Шон дает себе неограниченные права на утверждение покупок и указывает, что он должен получать уведомления в форме внутренних записок сразу при возникновении соответствующего события. Наконец, Шон создает требуемый рабочий процесс утверждения как копию существующего шаблона рабочего процесса утверждения заказов на покупку, оставляет все существующие условия наступления событий и параметры отклика без изменений, а затем включает рабочий процесс.  

Для тестирования рабочего процесса утверждения Шон сначала входит в [!INCLUDE[d365fin](includes/d365fin_md.md)] под именем Алисии и запрашивает утверждение заказа на покупку. Затем Шон входит в систему под своим именем, видит записку в своем ролевом центре, переходит по ссылке к запросу на утверждение заказа на покупку и утверждает этот запрос.  

## <a name="setting-up-the-sample-data"></a>Настройка образца данных  
Необходимо создать на локальном компьютере и в [!INCLUDE[d365fin](includes/d365fin_md.md)] нового пользователя, представляющего Алисию, а затем выбрать его в качестве пользователя для утверждения. Ваша собственная учетная запись пользователя будет представлять Шона.  

### <a name="to-add-alicia-as-a-user-on-the-local-computer"></a>Чтобы добавить Алисию в качестве пользователя на локальном компьютере  

1.  Выберите **Пуск**, затем в поле **Поиск программ и файлов** войдите в раздел **Изменить локальных пользователей и группы**, а затем выберите связанную ссылку.  
2.  Откройте папку **Пользователи**.  
3.  На вкладке **Действия** выберите **Новый пользователь**.  
4.  В поле **Имя пользователя** введите "Алисия".  
5.  В полях **Пароль** и **Подтверждение пароля** введите действительный пароль.  
6.  Снимите флажок **Требовать смену пароля при следующем входе в систему**.  
7.  Закройте окно **Локальные пользователи и группы**.  

### <a name="to-add-alicia-as-a-user-in-included365finincludesd365finmdmd"></a>Чтобы добавить Алисию в качестве пользователя в [!INCLUDE[d365fin](includes/d365fin_md.md)]  
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Пользователи**, а затем выберите связанную ссылку.  
2.  В окне **Пользователи Windows** на вкладке **Главная** в группе **Создать** выберите **Создать**.  
3.  В окне **Карта пользователя** в поле **Имя пользователя** введите "Алисия".  
4.  В поле **Имя пользователя Windows** выберите кнопку AssistEdit.  
5.  В окне **Выбор пользователя или группы**, в поле **Введите имя объекта для выбора** введите "Алисия", а затем нажмите кнопку **Проверить имена**.  
6.  Когда в поле появится значение [ИМЯ КОМПЬЮТЕРА]АЛИСИЯ, выберите кнопку **ОК**.  
7.  На экспресс-вкладке **Наборы разрешений пользователей** в поле **Набор разрешений** выберите **СУПЕР**.  
8.  В поле **Компания** выберите **CRONUS International Ltd.**  
9. Нажмите кнопку **ОК**.  

## <a name="setting-up-approval-users"></a>Настройка пользователей утверждения  
С использованием только что созданного пользователя Windows укажите Алисию в качестве пользователя утверждения, для которого утверждающим являетесь вы сами. Настройте права утверждения и укажите, как и когда вы будете получать уведомления о запросах на утверждение.  

### <a name="to-set-up-yourself-and-alicia-as-approval-users"></a>Чтобы указать себя и Алисию в качестве пользователей утверждения  
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Настройка пользователя для утверждений**, затем выберите связанную ссылку.  
2.  В окне **Утверждение - настройка пользователя** на вкладке **Главная** в окне **Создать**, выберите **Создать**.  

    > [!NOTE]  
    >  Следует настроить утверждающего до того, как настраивать пользователей, которым требуется утверждение этого утверждающего лица. Таким образом, до настройки данных Алисии необходимо настроить свои данные.  

3.  Настройте двух пользователей утверждения, заполнив поля, как указано в следующей таблице.  

    |ИД пользователя|Код утверждающего|Утверждение закупок без ограничений|  
    |-------------|-----------------|---------------------------------|  
    |[ИМЯ КОМПЬЮТЕРА][ВЫ]||Выбрано|  
    |[ИМЯ КОМПЬЮТЕРА]АЛИСИЯ|[ИМЯ КОМПЬЮТЕРА][ВЫ]||  

## <a name="setting-up-notifications"></a>Настройка уведомления  
Укажите способ и время получения уведомлений о запросах на утверждение.  

### <a name="to-set-up-how-and-when-you-are-notified"></a>Чтобы настроить способ и момент получения уведомлений  
1.  В окне **Настройка пользователя утверждения** выберите строку для себя, а затем на вкладке **Главная**, в группе **Процесс** выберите **Настройка уведомлений**.  
2.  В окне **Настройка уведомлений** в поле **Тип уведомления** введите **Утверждение**.  
3.  Выберите поле **Код шаблона уведомления**, затем выберите кнопку **Дополнительно**.  
4.  В окне **Шаблоны уведомлений** на вкладке **Главная** в группе **Управление** выберите **Изменить список**.  
5.  В строке для шаблона УТВЕРЖДЕНИЕ в поле **Метод уведомления** введите **Заметка**.  
6.  Нажмите кнопку **ОК**.  
7.  В окне **Настройка уведомлений** на вкладке **Главная** в группе **Процесс** выберите **График уведомлений**.  
8.  В окне **График уведомлений** в поле **Вхождение**, выберите **Сразу**.  
9. Нажмите кнопку **ОК**.  

## <a name="creating-the-approval-workflow"></a>Создание рабочего процесса утверждения  
 Создайте рабочий процесс утверждения заказа на покупку путем копирования шагов из шаблона рабочего процесса "Утверждение заказа на покупку". Оставьте шаги существующего рабочего процесса без изменений, а затем включите этот рабочий процесс.  

### <a name="to-create-and-enable-a-purchase-order-approval-workflow"></a>Чтобы создать и включить рабочий процесс утверждения заказа на покупку  
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Рабочие процессы**, затем выберите связанную ссылку.  
2.  В окне **Рабочие процессы** на вкладке **Действия** в группе **Общее** выберите **Создать рабочий процесс из шаблона**.  
3.  На вкладке **Действия** в группе **Общее** выберите **Создать рабочий процесс из шаблона**. Открывается окно **Шаблоны рабочих процессов**.  
4.  Выберите шаблон рабочего процесса под именем "Рабочий процесс утверждения заказа на покупку", затем нажмите кнопку **OK**.  

    Откроется окно **Рабочий процесс** для нового рабочего процесса, содержащее всю информацию из выбранного шаблона. Значение в поле **Код** дополняется символами "-01", которые указывают, что это первый рабочий процесс, созданный на основе шаблона рабочего процесса "Рабочий процесс утверждения заказа на покупку".  
5.  В заголовке окна **Рабочий процесс** установите флажок **Включено**.  

## <a name="starting-a-notification-job-queue"></a>Запуск очереди заданий уведомления  
Убедитесь, что в очереди работ в установке настроена обработка уведомлений потока операций.  

### <a name="to-start-the-notify-job-queue"></a>Чтобы запустить очередь работ NOTIFY  
1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Очереди работ**, а затем выберите связанную ссылку.  
2.  В окне **Очереди работ** выберите строку для очереди работ NOTIFY, а затем на вкладке **Главная** в группе **Процесс** выберите **Пуск очереди работ**.  

## <a name="using-the-approval-workflow"></a>Использование рабочего процесса утверждения  
Чтобы использовать новый рабочий процесс утверждения заказов на покупку, сначала войдите в [!INCLUDE[d365fin](includes/d365fin_md.md)] под именем Алисии, чтобы запросить утверждение заказа на покупку. Затем войдите в систему под своим именем, просмотрите записку в ролевом центре, перейдите по ссылке к запросу на утверждение, а затем утвердите запрос.  

Чтобы войти в [!INCLUDE[d365fin](includes/d365fin_md.md)] по разными именами пользователей, воспользуйтесь функцией **Запуск от имени другого пользователя**.  

### <a name="to-log-into-included365finincludesd365finmdmd-as-alicia"></a>Чтобы войти в [!INCLUDE[d365fin](includes/d365fin_md.md)] под именем Алисии  

1.  Для веб-клиента [!INCLUDE[d365fin](includes/d365fin_md.md)] на кнопке пуска браузера для данной веб-страницы нажмите Shift+правая кнопка мыши, а затем нажмите кнопку **Запуск от имени другого пользователя**.  

    Для Windows-клиента [!INCLUDE[d365fin](includes/d365fin_md.md)] на кнопке пуска браузера для программы нажмите Shift+правая кнопка мыши, а затем нажмите кнопку **Запуск от имени другого пользователя**.  

2.  В окне **Безопасность Windows**, введите в [ИМЯ КОМПЬЮТЕРА]АЛИСИЯ и требуемый пароль.  

### <a name="to-request-approval-of-a-purchase-order-as-alicia"></a>Чтобы запросить утверждение заказа на покупку от имени Алисии  

1.  Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Заказы на покупку**, затем выберите связанную ссылку.  
2.  Выберите строку для открытого заказа на покупку 104001, а затем на вкладке **Главная** в группе **Управление** выберите **Правка**.  
3.  В окне **Заказ на покупку** на вкладке **Действия** в группе **Утверждение** выберите **Отправить запрос на утверждение**.  

    Обратите внимание, что значение в поле **Статус** изменено на **Ожидает утверждения**.  

4.  Закройте [!INCLUDE[d365fin](includes/d365fin_md.md)].  

### <a name="to-approve-the-purchase-order-as-sean"></a>Чтобы утвердить заказ на покупку от имени Шона  

1.  Откройте [!INCLUDE[d365fin](includes/d365fin_md.md)], как обычно. Программа будет открыта с вами как пользователем.  
2.  В ролевом центре, в окне **Мои уведомления**, найдите новую записку от Алисии.  

    > [!NOTE]  
    >  Хотя повторение уведомлений имеет значение **Сразу**, записка поступит приблизительно спустя одну минуту после отправки Алисией запроса на утверждение. Это связано с частотой повторения по умолчанию в функции очереди работ.  

3.  Если заметка отображается в окне **Мои уведомления**, выберите значение **Операция утверждения: XX, XX** в поле **Страница**. Откроется окно **Запросы на утверждение** с выделенным запросом на утверждение заказа на покупку от Алисии.  
4.  В окне **Запросы на утверждение** на вкладке **Главная** в группе **Процесс** выберите **Утвердить**.  

    Значение в поле **Статус** заказа на покупку Алисии будет изменено на **Выпущено**.  

Вы настроили и протестировали простой рабочий процесс утверждения на основе первых двух шагов рабочего процесса утверждения заказа на покупку. Можно с легкостью расширить этот рабочий процесс таким образом, чтобы автоматически учесть заказ на покупку Алисии при его утверждении Шоном. Чтобы это сделать, необходимо включить рабочий процесс счета покупки, в котором откликом на выпущенный счет покупки является его учет. Сначала необходимо изменить условие события в первом шаге рабочего процесса с **Счет** (покупки) на **Заказ**.  

Универсальная версия [!INCLUDE[d365fin](includes/d365fin_md.md)] включает несколько шаблонов рабочего процесса для сценариев, которые поддерживаются кодом приложения. Большинство из них предназначено для рабочих процессов утверждения. Дополнительные сведения см. в разделе Шаблоны рабочих процессов.  

Варианты рабочих процессов заполняются посредством заполнения полей в строках рабочего процесса из фиксированных списков значений события и отклика, представляющих сценарии, которые поддерживаются кодом приложения. Дополнительные сведения см. в разделе [Практическое руководство. Создание рабочих процессов](across-how-to-create-workflows.md).  

Если бизнес-сценарий требует события или отклика рабочего процесса, которые не поддерживаются, партнеру Майкрософт придется реализовать их, настроив код приложения. Дополнительные сведения см. в разделе [Пошаговое руководство. Реализация новых и событий и отзывов рабочего процесса](https://msdn.microsoft.com/en-us/library/mt574349.aspx) на сайте MSDN.  

## <a name="see-also"></a>См. также  
[Практическое руководство. Настройка утверждающих пользователей](across-how-to-set-up-approval-users.md)   
[Настройка уведомлений рабочего процесса](across-setting-up-workflow-notifications.md)   
[Практическое руководство. Создание рабочих процессов](across-how-to-create-workflows.md)   
[Практическое руководство. Использование рабочего процесса утверждения](across-how-use-approval-workflows.md)   
[Рабочий процесс](across-workflow.md)

