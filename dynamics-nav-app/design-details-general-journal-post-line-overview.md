---
title: "Обзор строки учета финансового журнала"
description: "В этом разделе рассматриваются изменения модуля codeunit 12 **Фин. журнал строка учета** — это основной объект приложения для учета главной книги и единственное место для вставки операций главной книги, НДС, книги поставщиков и клиентов."
documentationcenter: 
author: SorenGP
ms.prod: dynamics-nav-2018
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: design, general ledger, post
ms.date: 07/01/2017
ms.author: sgroespe
ms.translationtype: HT
ms.sourcegitcommit: 4fefaef7380ac10836fcac404eea006f55d8556f
ms.openlocfilehash: acec7686de26d47011a0637ab0b3bf70c8559b71
ms.contentlocale: ru-ru
ms.lasthandoff: 10/16/2017

---
# <a name="general-journal-post-line-overview"></a>Обзор строки учета финансового журнала
Модуль codeunit 12 **Фин. журнал - строка учета** — это основной объект приложения для учета главной книги и единственное место для вставки операций главной книги, НДС, книги поставщиков и клиентов. Этот модуль codeunit также используется для всех операций применения, отмены применения и сторнирования.  
  
Хотя модуль codeunit улучшался в каждом выпуске за последние десять лет, его архитектура оставалась по большей части неизменной. Модуль codeunit стал очень большим и содержит приблизительно 7600 строк кода. В этом выпуске [!INCLUDE[d365fin](includes/d365fin_md.md)] архитектура изменена и модуль codeunit стало проще использовать и поддерживать. Эта документация включает изменения и содержит сведения, необходимые для обновления.  
  
## <a name="old-architecture"></a>Старая архитектура  
Старая архитектура имела следующие функции:  
  
* Глобальные переменные использовались слишком часто, что увеличивало возможность скрытых ошибок из-за неправильного использования переменных.  
* Существовало множество длинных процедур (содержащих более 100 строк кода) с высоким уровнем цикломатической сложности (т.е. частое использование вложенных операторов CASE, REPEAT и IF), из-за чего код было сложно считывать и поддерживать.  
* Несколько процедур, которые использовались только локально и предназначались только для локального использования, не были отмечены как локальные.  
* В большинстве процедур отсутствовали параметры и использовались глобальные переменные. В некоторых процедурах использовались параметры и были переопределены глобальные переменные локальными значениями.  
* Шаблоны кода для поиска счетов главной книги и создания операций НДС и главной книги не были стандартизированы и различаются в зависимости от места использования. Кроме того, часто возникает дублирование кода и нарушается симметрия между кодом клиента и поставщика.  
* Большая часть кода в модуле codeunit 12, т.е. приблизительно 30 процентов, связана с расчетами скидки оплаты и отклонения в оплате, хотя эти функции не требуются в большинстве стран или регионов.  
* Функции "Учет", "Применить", "Отменить применение", "Сторнировать", "Скидка оплаты", "Отклонение в оплате" и "Коррекция валютного курса" были объединены в модуль codeunit 12 с помощью длинного списка глобальных переменных.  
  
### <a name="new-architecture"></a>Новая архитектура  
В [!INCLUDE[d365fin](includes/d365fin_md.md)] модуль codeunit 12 усовершенствован следующим образом:  
  
* Модуль codeunit 12 был реорганизован на более мелкие процедуры (все содержат менее 100 строк кода).  
* Стандартизированные шаблоны для поиска счетов главной книги реализованы с помощью вспомогательных функций из таблицы "Учетная группа".  
* Платформа механизма учета была реализована для управления началом и окончанием транзакций и для изолирования создания в главной книге и операциях НДС, коллекции коррекции НДС и расчета дополнительных сумм валюты.  
* Дублирование кода устранено.  
* Множество вспомогательных функций перемещены в соответствующие таблицы и книги клиентов и поставщиков.  
* Использование глобальных переменных сведено к минимуму, чтобы в каждой процедуре использовались параметры и инкапсулировалась собственная логика применения.  
  
## <a name="see-also"></a>См. также  
[Сведения о проектировании: структура интерфейса учета](design-details-posting-interface-structure.md)   
[Сведения о проектировании: структура механизма учета](design-details-posting-engine-structure.md)

